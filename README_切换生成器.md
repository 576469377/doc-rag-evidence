# 切换生成器模式

## ✅ 已修改配置

配置文件 `configs/app.yaml` 已更新：

```yaml
generator:
  type: "qwen3_vl"  # 现在使用真实LLM生成
```

## 🔄 需要重启UI

配置修改后需要**重启UI**才能生效：

```bash
# 1. 停止当前UI (在UI终端按 Ctrl+C)

# 2. 重新启动UI
bash scripts/start_ui.sh
```

## 🎯 验证LLM是否启用

启动UI后，查看日志中的生成器类型：

```
✅ Using QwenLLMGenerator    # ← 表示使用LLM
```

而不是：

```
✅ Using TemplateGenerator   # ← 表示使用模板（旧的）
```

## 📊 对比效果

### 模板生成器 (template)
- 简单拼接检索结果
- 答案格式：`根据检索到的相关证据：\n\n[1] 证据1...\n[2] 证据2...`
- 无推理能力

### LLM生成器 (qwen3_vl)
- Qwen3-VL-4B真实推理
- 自然语言答案
- 智能引用证据
- 答案示例：`磷酸氢钙的主要原料包括氢氧化钙、碳酸钙和氧化钙[1]，生产过程中还需要使用食品添加剂磷酸[2]。`

## ⚙️ 手动切换

如果需要切换回模板生成器：

```yaml
# 编辑 configs/app.yaml
generator:
  type: "template"  # 改回template
```

然后重启UI。

## 🔍 测试验证

重启UI后，在界面中：

1. **选择检索模式**: BM25
2. **输入问题**: `磷酸氢钙的原料有哪些？`
3. **查看答案**: 应该是自然流畅的句子，而不是简单的证据列表

预期答案类似：
```
磷酸氢钙的主要原料包括氢氧化钙、碳酸钙和氧化钙[1]，
生产过程中还需要使用食品添加剂磷酸[2]。
```
